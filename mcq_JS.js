var questionPool = [
    {
        question: "The default value of a static integer variable of a class in Java is,",
        choices: [
            "0",
            "1",
            "Garbage value",
            "null"
        ],
        correct : 1
    },
    {
        question: "To prevent any method from overriding, we declare the method as,",
        choices: [
            "static",
            "const",
            "final",
            "abstract"
        ],
        correct : 3
    },
    {
        question: "Which one of the following is not true?",
        choices: [
            "A class containing abstract methods is called an abstract class.",
            "Abstract methods should be implemented in the derived class.",
            "An abstract class cannot have non-abstract methods.",
            "A class must be qualified as ‘abstract’ class, if it contains one abstract method."
        ],
        correct : 3
    },
    {
        question: "The fields in an interface are implicitly specified as,",
        choices: [
            "static only",
            "private",
            "both static and final",
            "protected"
        ],
        correct : 3
    },
    {
        question: "Which of the following is TRUE?",
        choices: [
            "In java, an instance field declared public generates a compilation error.",
            "int is the name of a class available in the package java.lang",
            "Instance variable names may only contain letters and digits.",
            "A class has always a constructor (possibly automatically supplied by the java compiler)."
        ],
        correct : 4
    },
    {
        question: "A constructor",
        choices: [
            "Must have the same name as the class it is declared within.",
            "Is used to create objects.",
            "May be declared private.",
            "All of the above."
        ],
        correct : 4
    },
    {
        question: "What is byte code in the context of Java?",
        choices: [
            "The type of code generated by a Java compiler.",
            "The type of code generated by a Java Virtual Machine.",
            "It is another name for a Java source file.",
            "It is the code written within the instance methods of a class."
        ],
        correct : 1
    },
    {
        question: "What is garbage collection in the context of Java?",
        choices: [
            "The operating system periodically deletes all the java files available on the system.",
            "When all references to an object are gone, the memory used by the object is automatically reclaimed.",
            "The JVM checks the output of any Java program and deletes anything that doesn’t make sense.",
            "Any package imported in a program and not used is automatically deleted.",
            
        ],
        correct : 2
    },
    {
        question: "The correct order of the declarations in a Java program is,",
        choices: [
            "Package declaration, import statement, class declaration",
            "Import statement, package declaration, class declaration",
            "Import statement, class declaration, package declaration",
            "Class declaration, package declaration, import statement."
        ],
        correct : 1
    },
    {
        question: "All exception types are subclasses of the built-in class",
        choices: [
            "Exception",
            "RuntimeException",
            "Error",
            "Throwable"
        ],
        correct : 4
    },
    {
        question: "In Java, a try block should immediately be followed by one or more ________ blocks.",
        choices: [
            "Throw",
            "Run",
            "Exit",
            "Catch"
        ],
        correct : 4
    },
    {
        question: "________ are used to document a program and improve its readability.",
        choices: [
            "Comments",
            "Blocks",
            "Control structures",
            "Keywords"
        ],
        correct : 1
    },
    {
        question: "In object-oriented programming, the process by which one object acquires the properties of another object is called",
        choices: [
            "Encapsulation",
            "Inheritance",
            "Overriding",
            "Polymorphism"
        ],
        correct : 2
    },
    {
        question: "________ is known as the father of Java.",
        choices: [
            "Rasmus Lerdrof",
            "James Gosling",
            "Denis Richie",
            "None of the above"
        ],
        correct : 2
    },
    {
        question: "Which of these is an incorrect statement?",
        choices: [
            "String objects are immutable, they cannot be changed",
            "String object can point to some other reference of String variable",
            "StringBuffer class is used to store string in a buffer for later use",
            "None of the mentioned"
        ],
        correct : 3
    },
    {
        question: "Which of the following is generally used for performing tasks like creating the structure of the relations, deleting relation?",
        choices: [
            "DDL(Data Definition Language)",
            "DML(Data Manipulation Language)",
            "Query",
            "Relational Schema"
        ],
        correct : 1
    },
    {
        question: "Which one of the following given statements possibly contains the error?",
        choices: [
            "select * from emp where empid = 10003;",
            "select empid where empid = 1009 and Lastname = 'GELLER';",
            "select empid from emp;",
            "select empid from emp where empid = 10006;"
        ],
        correct : 2
    },
    {
        question: "In one-to-many relationship the table on 'many' side is called ________",
        choices: [
            "Master",
            "Sister",
            "Child",
            "Parent"
        ],
        correct : 3
    },
    {
        question: "What type of join is needed when you wish to include rows that do not have matching values?",
        choices: [
            "Natural join",
            "Outer join",
            "Equi-join",
            "None of the mentioned"
        ],
        correct : 2
    },
    {
        question: "Which forms simplifies and ensures that there are minimal data aggregates and repetitive groups:",
        choices: [
            "1NF",
            "2NF",
            "3NF",
            "All of the above"
        ],
        correct : 3
    }
];

var questionsCount = 10;
var score = 0;
var timer = 20;
var timerTime = timer;

function resetTimer(){
    timer = timerTime;
}

var countDown = setInterval(() => {
    document.getElementById("timer").innerHTML = "00h:00m:" + timer + "s ";
    timer--;

    if (timer < 0) {
        nextQuestion();
    }
}, 1000);

var questionField = document.getElementById("question");
var radioBtns = document.getElementsByClassName("OptionsText");
var correct;
var testEnd = false;

function nextQuestion(){
    let userSelected = getRadioValue();

    if (questionsCount <= 0) {
        if(userSelected==correct && testEnd==false){
            score++;
        }
        clearInterval(countDown);
        document.getElementById("timer").innerHTML = "00h:00m:00s";
        document.getElementById("finalMessage").innerHTML = "Your score is " + score + " points.";
        $('#myModal').modal({
            backdrop: "static"
        });
        $("#myModal").modal();
        testEnd = true;
        return 0;
    }
    
    console.log(userSelected + " | " + correct);
    if(userSelected==correct){
        score++;
    }
    
    let index = Math.floor(Math.random() * questionPool.length);
    let question = questionPool[index].question;
    let choices = questionPool[index].choices;
    correct = questionPool[index].correct;

    questionField.innerHTML = "Q" + (11 - questionsCount) + ". " + question;
    for(let i = 0; i<choices.length; i++){
        radioBtns[i].innerHTML = choices[i];
    }
    
    resetRadioButton();
    resetTimer();

    questionPool.splice(index, 1);
    questionsCount--;
}

function getRadioValue() {
    var opt = document.getElementsByName('optradio');

    for(let i = 0; i < opt.length; i++) {
        if(opt[i].checked) {
            return opt[i].value;
        }
    }

    return 0;
}

function resetRadioButton(){
    var opt = document.getElementsByName('optradio');
    for(i = 0; i < opt.length; i++) {
        opt[i].checked = false;
    }
}

function reloadPage(){
    window.location.reload();
}

nextQuestion();